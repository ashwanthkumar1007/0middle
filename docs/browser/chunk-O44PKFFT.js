import{p as g}from"./chunk-DUHRLAU3.js";import{a,b as u,j as d}from"./chunk-5JMWVOIS.js";var n=[{value:"kg",label:"Kilogram (kg)",category:"weight",description:"Used for solid items - grains, dals, flour, etc."},{value:"quintal",label:"Quintal",category:"weight",description:"Bulk measurement - 100 kg"},{value:"ton",label:"Ton",category:"weight",description:"Large bulk measurement - 1000 kg"},{value:"bag",label:"Bag",category:"weight",description:"Standard bag - typically 50 kg"},{value:"liter",label:"Liter",category:"volume",description:"Used for liquids - oil, honey, milk, etc."},{value:"piece",label:"Piece",category:"count",description:"Individual items or packages"}],S=n.map(l=>l.value),h={weight:n.filter(l=>l.category==="weight"),volume:n.filter(l=>l.category==="volume"),count:n.filter(l=>l.category==="count"),other:n.filter(l=>l.category==="other")};var p=(()=>{class l{constructor(){this.STORAGE_KEY="products",this.MIGRATION_FLAG_KEY="products_migrated",this.ensureMigration()}ensureMigration(){if(localStorage.getItem(this.MIGRATION_FLAG_KEY))return;if(this.getAllProducts().length>0){localStorage.setItem(this.MIGRATION_FLAG_KEY,"true");return}let e=[];g.forEach(r=>{r.products.forEach(o=>{let i={productId:o.productId,sellerMobileNumber:r.mobileNumber,name:o.name,imageUrl:o.imageUrl,unit:o.unit,pricePerUnit:o.pricePerUnit,initialStock:o.initialStock||o.currentStock,currentStock:o.currentStock,unitsSold:o.unitsSold||0,createdDate:o.createdDate};e.push(i)})}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),localStorage.setItem(this.MIGRATION_FLAG_KEY,"true"),console.log(`\u2705 Migrated ${e.length} products from MOCK_USERS to localStorage`)}getAllProducts(){try{let t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):[]}catch(t){return console.error("Failed to get products from localStorage:",t),[]}}getProductsBySeller(t){return this.getAllProducts().filter(r=>r.sellerMobileNumber===t)}getProductById(t){return this.getAllProducts().find(r=>r.productId===t)||null}addProduct(t){try{let e=this.getAllProducts();return t.productId||(t.productId=this.generateProductId()),t.createdDate||(t.createdDate=new Date().toISOString().split("T")[0]),t.unitsSold===void 0&&(t.unitsSold=0),t.initialStock||(t.initialStock=t.currentStock),e.push(t),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),console.log("\u2705 Product added successfully:",t.name),!0}catch(e){return console.error("Failed to add product:",e),!1}}updateProduct(t,e){try{let r=this.getAllProducts(),o=r.findIndex(i=>i.productId===t);return o===-1?(console.error("Product not found:",t),!1):(r[o]=u(a(a({},r[o]),e),{productId:r[o].productId,sellerMobileNumber:r[o].sellerMobileNumber}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),console.log("\u2705 Product updated successfully:",t),!0)}catch(r){return console.error("Failed to update product:",r),!1}}deleteProduct(t){try{let e=this.getAllProducts(),r=e.filter(o=>o.productId!==t);return e.length===r.length?(console.error("Product not found:",t),!1):(localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),console.log("\u2705 Product deleted successfully:",t),!0)}catch(e){return console.error("Failed to delete product:",e),!1}}generateProductId(){return`prod-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getSellerStats(t){let e=this.getProductsBySeller(t),r=e.length,o=e.reduce((c,s)=>c+(s.unitsSold||0),0),i=e.reduce((c,s)=>{let f=s.unitsSold||0;return c+f*s.pricePerUnit},0);return{totalProducts:r,totalUnitsSold:o,totalRevenue:i}}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275prov=d({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})();export{n as a,p as b};
